C51 COMPILER V9.00   MAIN                                                                  04/21/2015 18:25:45 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\output\main.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main\main.c LARGE BROWSE INCDIR(.\main;.\eeprom;.\oled;.\uart;.\74hc595;.\c
                    -d4052;.\isr;.\Key) DEBUG OBJECTEXTEND PRINT(.\list\main.lst) OBJECT(.\output\main.obj)

line level    source

   1          #include "main.h"
   2          #include "uart.h"
   3          #include "oled.h"
   4          #include "24c02.h"
   5          #include "cd4052.h"
   6          #include "_595.h"
   7          #include "isr.h"
   8          #include "key.h"
   9          /*********************************************************************/
  10          #define PRINT_AUTHOR_INFO          //打印作者信息
  11          #define SHOW_LOGO                          //显示屏显示logo
  12          /*********************************************************************///宏开关，控制以上功能选项
  13          u32 AddNo;    //割码地址值 
  14          #ifdef PRINT_AUTHOR_INFO
  15          
  16          u8 Cutflag;
  17          u8 BeepFlag;
  18          void printInfo(void)
  19          {
  20   1         send_string ("=======================================================\n");
  21   1         send_string ("********************* Burn Code X *********************\n");
  22   1         send_string ("*                                                     *\n");
  23   1         send_string ("*    Version: SDK1.00.00(11:20:16 Apr 2  2015)        *\n");
  24   1         send_string ("*     Author: Liaokeyre<Liaokeyre@foxmail.com>        *\n");
  25   1         send_string ("*  Author: Cherry@ycsemi.com.cn @yancheng company     *\n");
  26   1         send_string ("*                                                     *\n");
  27   1         send_string ("*******************************************************\n"); 
  28   1         send_string ("=======================================================\n");
  29   1         send_string ("\n\n\nSystem Loading...\n");
  30   1         send_string ("\n\n\nSystem Load Ok!\n");
  31   1      }
  32          #endif
  33          
  34          void initAddNo(void)     //判断地址值是否正常
  35          {
  36   1        u32 tmp;
  37   1        at24c02_rddat(0x10,(u8*)&tmp,4);
  38   1        if((tmp == 0xffffffff)||((tmp > 0xfffff))) //初始状态 || 累加溢出？
  39   1        {
  40   2         AddNo = 0;
  41   2         at24c02_wrdat(0x10,(u8*)&AddNo,4);
  42   2        }
  43   1      }
  44          void oledInit(void)
  45          {
  46   1              OLED_Init();  //初始化OLED  
  47   1              OLED_Clear(); 
  48   1              /*
  49   1          OLED_ShowFont16(0,10,0,1);
  50   1              OLED_ShowFont16(16,10,1,1);
  51   1              OLED_ShowFont16(32,10,2,1);
  52   1              OLED_ShowFont16(48,10,3,1);
  53   1              OLED_ShowFont16(64,10,4,1);
  54   1              OLED_ShowFont16(80,10,5,1);
C51 COMPILER V9.00   MAIN                                                                  04/21/2015 18:25:45 PAGE 2   

  55   1              OLED_ShowFont16(96,10,6,1);
  56   1              OLED_ShowFont16(112,10,7,1);
  57   1              */
  58   1      #ifdef SHOW_LOGO
  59   1              OLED_DrawBMP(0,0);                      // show logo
  60   1      #endif
  61   1              OLED_Refresh_Gram();
  62   1      }
  63          
  64          void ioInit(void)
  65          {
  66   1            P1M1 = 0;
  67   1                P1M0 = 0; 
  68   1            P2M1 = 0;
  69   1                P2M0 = 0;
  70   1            P3M1 = 0;
  71   1                P3M0 = 0; 
  72   1            P4M1 = 0;
  73   1                P4M0 = 0;
  74   1            P5M1 = 0;
  75   1                P5M0 = 0; 
  76   1            P0M1 = 0;
  77   1                P0M0 = 0;
  78   1      
  79   1                P4M0 |= 0x22;
  80   1      
  81   1                P1M1 |= 0Xff;
  82   1                P1M0 &= ~0Xff; //高阻输入     ADC输入端口配置
  83   1      
  84   1                P2M1 &= ~0XF8;
  85   1                P2M0 |= 0XF8; //推挽
  86   1      
  87   1      }
  88          
  89          void sysInit(void)
  90          {
  91   1        ioInit();
  92   1        InitADC();
  93   1        UartInit();
  94   1        oledInit();
  95   1        timerInit();
  96   1        BeepFlag = 0;
  97   1      }
  98          
  99          void main(void)
 100          {
 101   1              u16 tmp;
 102   1          sysInit();
 103   1              SPEAKER = 1;
 104   1      #ifdef PRINT_AUTHOR_INFO
 105   1              printInfo();
 106   1      #endif
 107   1          EA = 1;
 108   1              SPEAKER = 0;
 109   1              OLED_DrawBMP(0,0);
 110   1              AddNo = 1;
 111   1              storge595(&AddNo,4);
 112   1              ENABLE595(); 
 113   1                      DSENVMOS();                       // 关mos电源
 114   1                      DSENABLE595();                    // 关595控制mos开关
 115   1                      Cutflag = 0;
 116   1              OLED_Clear();
C51 COMPILER V9.00   MAIN                                                                  04/21/2015 18:25:45 PAGE 3   

 117   1              while(1)
 118   1              {
 119   2      //  A1_4052 = 1;
 120   2      //  A2_4052 = 1;
 121   2      //  B1_4052 = 1;
 122   2      //  B2_4052 = 1;
 123   2      //  NOP40();
 124   2      //  tmp = Adc2Res(GetADCResult(CH2));
 125   2      //  printf_u8(tmp>>8);
 126   2      //  printf_u8(tmp);
 127   2                if((Key_back == PR_ADD)&&(Key_change))
 128   2                {
 129   3                 AddNo >>= 1;         storge595(&AddNo,4); Key_change=0; BeepFlag =1; 
 130   3                }
 131   2                else if((Key_back == PR_SUB)&&(Key_change))
 132   2                {
 133   3                 AddNo <<= 1;         storge595(&AddNo,4);  Key_change=0;     BeepFlag =1;
 134   3                }
 135   2                else if((Key_back == PR_OK)&&(Key_change))
 136   2                {
 137   3                 StartCut(0); Key_change=0;   BeepFlag =1;
 138   3                }
 139   2      //        OLED_ShowAdd(0,0,AddNo,AddNo);
 140   2      //        OLED_Refresh_Gram();
 141   2      //        
 142   2              }
 143   1      }
*** WARNING C280 IN LINE 101 OF MAIN\MAIN.C: 'tmp': unreferenced local variable


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    448    ----
   CONSTANT SIZE    =    441    ----
   XDATA SIZE       =      6       6
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
